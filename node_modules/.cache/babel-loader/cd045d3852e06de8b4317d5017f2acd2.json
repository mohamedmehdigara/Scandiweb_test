{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\p-c\\\\Downloads\\\\Github\\\\Scandiweb_test\\\\src\\\\components\\\\ProductItem\\\\ProductItem.js\";\nimport React from 'react';\nimport './ProductItem.css';\nimport { currencyStore, whichone } from '../../redux/currencyStore';\nimport CartIcon from '../../images/CircleIcon.png';\nimport { Link } from 'react-router-dom';\nimport cartStore from '../../redux/CartState';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ProductItem extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      currency: currencyStore.getState(),\n      amount: 0,\n      incart: false\n    };\n    currencyStore.subscribe(() => this.setState({\n      currency: currencyStore.getState()\n    }));\n    /* CartState.subscribe(() => { this.isInCart() }) */\n  }\n\n  addIntoCart(item) {\n    const newItem = JSON.parse(JSON.stringify(item));\n    newItem.itemCount = 1;\n\n    if (this.findSimilar(newItem) !== -5) {\n      cartStore.dispatch({\n        type: 'INCREMENT',\n        payload: this.findSimilar(newItem)\n      });\n    } else {\n      cartStore.dispatch({\n        type: 'ADD_PRODUCT',\n        payload: newItem\n      });\n    }\n  }\n\n  findSimilar(newItem) {\n    let k = -5;\n    cartStore.getState().cartItems.forEach((element, index) => {\n      if (JSON.stringify(element.name === newItem.name)) {\n        k = index;\n      }\n    });\n    return k;\n  }\n  /*\r\n    componentDidMount () {\r\n      this.isInCart()\r\n    }\r\n   */\n\n  /*  isInCart () {\r\n     if (!CartState.getState().cartItems.length) {\r\n       this.setState({ incart: false })\r\n     }\r\n     const arr = []\r\n     CartState.getState().cartItems.forEach(element => {\r\n       if (this.props.product.name === element.name) {\r\n         arr.push(element.name)\r\n       }\r\n     })\r\n     if (arr.includes(this.props.product.name)) {\r\n       this.setState({ incart: true })\r\n     } else { this.setState({ incart: false }) }\r\n   } */\n\n\n  render() {\n    const product = this.props.product;\n    const currency = this.state.currency;\n    const isPossible = !product.attributes.length && product.inStock;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"item-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        className: \"link-wrapper\",\n        to: '/product/' + product.id,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: !product.inStock ? 'outofstock' : '',\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"image-wrapper\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: product.gallery[0],\n              alt: \"galery\",\n              className: \"product-image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"product-name\",\n            children: product.brand + \" \" + product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"product-price\",\n            children: [currency, product.prices[whichone[currency]].amount]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), product.inStock ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"outoffilter\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"outof\",\n              children: \"out of stock\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 8\n      }, this), isPossible && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          this.addIntoCart(product);\n        },\n        className: \"addintcoart\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: CartIcon,\n          alt: \"cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default ProductItem;","map":{"version":3,"names":["React","currencyStore","whichone","CartIcon","Link","cartStore","ProductItem","Component","constructor","state","currency","getState","amount","incart","subscribe","setState","addIntoCart","item","newItem","JSON","parse","stringify","itemCount","findSimilar","dispatch","type","payload","k","cartItems","forEach","element","index","name","render","product","props","isPossible","attributes","length","inStock","id","gallery","brand","prices"],"sources":["C:/Users/p-c/Downloads/Github/Scandiweb_test/src/components/ProductItem/ProductItem.js"],"sourcesContent":["import React from 'react'\r\nimport './ProductItem.css'\r\nimport {currencyStore, whichone } from '../../redux/currencyStore'\r\nimport CartIcon from '../../images/CircleIcon.png'\r\nimport { Link } from 'react-router-dom'\r\nimport cartStore from '../../redux/CartState'\r\n\r\nclass ProductItem extends React.Component {\r\n  constructor () {\r\n    super()\r\n    this.state = { currency: currencyStore.getState(), amount: 0, incart: false }\r\n    currencyStore.subscribe(() => this.setState({ currency: currencyStore.getState() }))    \r\n    /* CartState.subscribe(() => { this.isInCart() }) */\r\n  }\r\n  addIntoCart(item){\r\n    const newItem = JSON.parse(JSON.stringify(item))\r\n    newItem.itemCount = 1\r\n    if (this.findSimilar(newItem) !== -5) {      \r\n      cartStore.dispatch({ type: 'INCREMENT', payload: this.findSimilar(newItem) })\r\n    } else {\r\n      cartStore.dispatch({ type: 'ADD_PRODUCT', payload: newItem })\r\n    }\r\n  }\r\n  findSimilar (newItem) {\r\n    let k = -5\r\n    cartStore.getState().cartItems.forEach((element, index) => {\r\n      if (JSON.stringify(element.name === newItem.name)){\r\n        k = index\r\n      }\r\n    })\r\n    return k\r\n  }\r\n/*\r\n  componentDidMount () {\r\n    this.isInCart()\r\n  }\r\n */\r\n /*  isInCart () {\r\n    if (!CartState.getState().cartItems.length) {\r\n      this.setState({ incart: false })\r\n    }\r\n    const arr = []\r\n    CartState.getState().cartItems.forEach(element => {\r\n      if (this.props.product.name === element.name) {\r\n        arr.push(element.name)\r\n      }\r\n    })\r\n    if (arr.includes(this.props.product.name)) {\r\n      this.setState({ incart: true })\r\n    } else { this.setState({ incart: false }) }\r\n  } */\r\n\r\n  render () {\r\n    const product = this.props.product\r\n    const currency = this.state.currency    \r\n    const isPossible = !product.attributes.length && product.inStock      \r\n    return (\r\n      <div className=\"item-wrapper\">\r\n       <Link\r\n        className=\"link-wrapper\"\r\n        to={'/product/' + product.id}\r\n       >\r\n        <div className={!product.inStock ? 'outofstock' : ''}>\r\n          <div className=\"image-wrapper\">\r\n            <img src={product.gallery[0]} alt=\"galery\" className=\"product-image\"/>\r\n           {/*  {this.state.incart ? <img src={CartIcon} alt=\"cart-icon\" className=\"small-cart__icon\"/> : null} */}\r\n          </div>\r\n            <p className=\"product-name\">\r\n              {product.brand + \" \" + product.name}\r\n            </p>            \r\n            <p className=\"product-price\">\r\n              {currency}{product.prices[whichone[currency]].amount }\r\n            </p>\r\n            {\r\n              product.inStock\r\n                ? null\r\n                : <div className=\"outoffilter\">\r\n                <p className=\"outof\">out of stock</p>\r\n              </div>\r\n            }\r\n        </div>\r\n         </Link>\r\n         {isPossible && <button onClick={()=>{this.addIntoCart(product)}} className=\"addintcoart\">\r\n          <img src={CartIcon} alt=\"cart\" />\r\n          </button>}\r\n      </div>\r\n\r\n    )\r\n  }\r\n}\r\nexport default ProductItem\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}